<html>
<head>
    <meta charset="UTF-8">
    <script type="text/javascript" src="dist/jquery-3.2.1.min.js"></script>
    <script type="text/javascript" src="dist/materialize.js"></script>
    <script src="https://unpkg.com/vue"></script>
    <link rel="stylesheet" href="dist/materialize.css" type="text/css"/>
</head>
<body>
<div id="app">
    <nav>
        <div class="nav-wrapper">
            <a href="#" class="brand-logo">Goaway Server Admin Page</a>
            <ul id="nav-mobile" class="right hide-on-med-and-down">
                <li><a href="badges">标签</a></li>
                <li><a href="buttons">按钮</a></li>
                <li><a href="footer">页脚</a></li>
            </ul>
        </div>
    </nav>
    <nav>
        <div class="nav-wrapper">
            <form>
                <div class="input-field">
                    <input id="search" type="search" required v-model="searchText"
                           placeholder="search for uri/description/filter name">
                    <label for="search"><i class="mdi-action-search"></i></label>
                    <i class="mdi-navigation-close"></i>
                </div>
            </form>
        </div>
    </nav>
    <ul class="pagination">
        <li class="disabled"><a href="#!"><i class="mdi-navigation-chevron-left"></i></a></li>
        <li class="active"><a href="#!">1</a></li>
        <li class="waves-effect"><a href="#!">2</a></li>
        <li class="waves-effect"><a href="#!">3</a></li>
        <li class="waves-effect"><a href="#!">4</a></li>
        <li class="waves-effect"><a href="#!">5</a></li>
        <li class="waves-effect"><a href="#!"><i class="mdi-navigation-chevron-right"></i></a></li>
    </ul>
    <ul class="collapsible" data-collapsible="accordion">
        <li v-for="service in servicelist">
            <div class="collapsible-header">
                <i class="mdi-image-filter-drama"></i>
                {{ service.Uri }}
                <div class="switch">
                    <label>
                        Off
                        <input type="checkbox" :checked="checked(service.Status)">
                        <span class="lever"></span>
                        On
                    </label>
                </div>
            </div>
            <div class="collapsible-body">
                <p v-for="filter in service.Filters">
                    <input type="checkbox" class="filled-in" v-bind:id="filterId(filter.id)"
                           :checked="checked(filter.status)"/>
                    <label v-bind:for="filterId(filter.id)">{{ filter.name }}</label>
                </p>
            </div>
        </li>
    </ul>
    <ul class="pagination">
        <li class="disabled"><a href="#!"><i class="mdi-navigation-chevron-left"></i></a></li>
        <li class="active"><a href="#!">1</a></li>
        <li class="waves-effect"><a href="#!">2</a></li>
        <li class="waves-effect"><a href="#!">3</a></li>
        <li class="waves-effect"><a href="#!">4</a></li>
        <li class="waves-effect"><a href="#!">5</a></li>
        <li class="waves-effect"><a href="#!"><i class="mdi-navigation-chevron-right"></i></a></li>
    </ul>
</div>
<script>
    var vm = new Vue({
        el: '#app',
        data: {
            searchText: '',
            servicelist: []
        },
        methods: {
            checked: function (status) {
                return status === 1 ? 'checked' : ''
            },
            filterId: function (id) {
                return 'filter-' + id
            }
        },
        watch: {
            searchText: function (searchText) {
                var _this = this
                $.ajax({
                    url: '/admin/service/list?prefix=' + searchText,
                    success: function (data) {
                        _this.servicelist = data.Mservicelist
                    }
                })

            }
        }
    })





    var servicelist = [{
        uri: '/institution-client/list',
        status: 1,
        filters: [{
            id: 12,
            name: '航班过滤器',
            status: 0
        }]
    }, {
        uri: '/institution-client/getInstitutionType',
        status: 0,
        filters: [{
            id: 15,
            name: '航班过滤器',
            status: 0
        }, {
            id: 33,
            name: 'MSDOWNLOAD过滤器',
            status: 1
        }]
    }, {
        uri: '/guest-permission/update-role-permission',
        status: 1,
        filters: [{
            id: 45,
            name: '航班过滤器',
            status: 0
        }]
    }, {
        uri: '/flight-info/get-flight-view',
        status: 1,
        filters: [{
            id: 34,
            name: '航班过滤器',
            status: 0
        }]
    }]
</script>

</body>
</html>